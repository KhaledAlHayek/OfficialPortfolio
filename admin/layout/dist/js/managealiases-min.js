let shortcuts=[],data=localStorage.getItem("shortcuts");data&&(shortcuts=JSON.parse(data));const setLocalStorage=e=>{localStorage.setItem("shortcuts",JSON.stringify(e))},addShortcut=(e,t,s)=>{const o={id:Date.now(),pageName:e,pageLink:t,description:s};shortcuts.push(o),setLocalStorage(shortcuts)},removeShortcut=e=>{shortcuts=shortcuts.filter(t=>t.id!=e),setLocalStorage(shortcuts)},updateShortcut=(e,t,s,o)=>{for(let a=0;a<shortcuts.length;a++)shortcuts[a].id==e&&(shortcuts[a].pageName=t,shortcuts[a].pageLink=s,shortcuts[a].description=o);setLocalStorage(shortcuts)},shortcutInfo=e=>shortcuts.filter(t=>t.id==e),removeAlert=e=>{setTimeout(()=>{e.style.display="none"},5e3)},failureMessage=(e,t)=>{e.innerHTML=t},successMessage=(e,t)=>{e.innerHTML=t},processMessage=(e,t,s)=>{const o=t.querySelector("i"),a=t.querySelector("span");e?(t.style.display="block",t.classList.add("error"),o.classList.add("fas","fa-times"),failureMessage(a,s),removeAlert(t)):(t.style.display="block",t.classList.add("success"),o.classList.add("fas","fa-check"),successMessage(a,s),removeAlert(t))},shortcutBox=document.querySelectorAll(".setting .aliases > div .head");shortcutBox.forEach(e=>{e.addEventListener("click",()=>{let t=e.nextElementSibling;e.classList.toggle("show-info"),e.classList.contains("show-info")?t.style.display="block":t.style.display="none"})});const addShortcutForm=document.forms["add-shortcut"],addMessage=document.querySelector(".setting .aliases .add-alias .alias-action .msg");addShortcutForm.addEventListener("submit",e=>{e.preventDefault();let t=addShortcutForm.name.value,s=addShortcutForm.link.value,o=addShortcutForm.desc.value,a=/\w+/gi;t.match(a)&&s.match(/(https?:\/\/)?(www.)?\w+\W+/gi)&&o.match(a)?(console.log("passed"),addShortcut(t,s,o),processMessage(null,addMessage,"Page alias has been added and can be used by other managers."),addShortcutForm.reset()):(console.log("not passed"),processMessage("error",addMessage,"Page alias not added. Please try again"))});const selectShortcut=document.querySelector(".setting .aliases .edit-alias .alias-action .select-shortcut select"),editShortcutForm=document.forms["edit-shortcut"],editMessage=document.querySelector(".setting .aliases .edit-alias .alias-action .msg");selectShortcut.addEventListener("change",()=>{const e=selectShortcut.value;if(e){const t=shortcutInfo(e);editShortcutForm.style.display="block";const s=editShortcutForm.querySelector(".sh-id"),o=editShortcutForm.querySelector(".edit-name"),a=editShortcutForm.querySelector(".edit-link"),c=editShortcutForm.querySelector(".edit-desc");t.map(e=>{o.value=e.pageName,a.value=e.pageLink,c.value=e.description,s.value=e.id})}}),editShortcutForm.addEventListener("submit",e=>{e.preventDefault();const t=editShortcutForm.id.value,s=editShortcutForm.name.value,o=editShortcutForm.link.value,a=editShortcutForm.desc.value;let c=/\w+/gi;s.match(c)&&o.match(/(https?:\/\/)?(www.)?\w+\W+/gi)&&a.match(c)?(updateShortcut(t,s,o,a),processMessage(null,editMessage,"Shortcut updated successfully."),editShortcutForm.reset()):processMessage("error",editMessage,"Something went wrong. Please try again.")});const selectToRemove=document.querySelector(".setting .aliases .remove-alias .alias-action .select-shortcut select"),deleteShortcutForm=document.forms["delete-shortcut"],deleteMessage=document.querySelector(".setting .aliases .remove-alias .alias-action .msg");selectToRemove.addEventListener("change",()=>{deleteShortcutForm.style.display="block";const e=selectToRemove.value;deleteShortcutForm.querySelector(".sh-id").value=e}),deleteShortcutForm.addEventListener("submit",e=>{e.preventDefault();const t=deleteShortcutForm.id.value;removeShortcut(t),processMessage(null,deleteMessage,"Shortcut has been deleted.")}),window.onload=(()=>{fillSelectOptions(selectShortcut),fillSelectOptions(selectToRemove)});const fillSelectOptions=e=>{shortcuts.forEach(t=>{const s=t.id,o=t.pageName,a=document.createElement("option");a.setAttribute("value",s);const c=document.createTextNode(o);a.appendChild(c),e.appendChild(a)})};